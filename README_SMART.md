# 🧠 윌리엄 오닐 스마트 돌파매매 봇 가이드

## ✨ 스마트 버전의 특징

### 🕐 자동 시간대 인식
```
09:00-15:30 (평일) → 🇰🇷 한국 주식만 스캔
22:30-06:00 (평일) → 🇺🇸 미국 주식만 스캔
나머지 시간 → ⏸️  대기 (스캔 안함)
```

### 💬 텔레그램 명령어로 종목 관리
```
/add_us AAPL      → 미국 주식 추가
/add_kr 005930    → 한국 주식 추가
/remove_us TSLA   → 미국 주식 삭제
/remove_kr 035420 → 한국 주식 삭제
/list             → 감시 종목 보기
/status           → 시장 상태 확인
/help             → 도움말
```

### ⏱️ 30분마다 자동 스캔
- 빠른 반응으로 놓치지 않는 투자 기회

### 💾 자동 저장
- 종목 추가/삭제 시 자동으로 파일에 저장
- 프로그램 재시작해도 유지

---

## 🚀 빠른 시작

### 1. 설정 파일 수정
```python
# config.py
TELEGRAM_TOKEN = "실제_봇_토큰"
CHAT_ID = "실제_Chat_ID"
```

### 2. 실행
```bash
python oneil_breakout_bot_smart.py
```

### 3. 텔레그램으로 종목 관리
```
/add_us NVDA
/add_kr 005930
/list
```

---

## 📱 텔레그램 명령어 상세

### 종목 추가

#### 미국 주식 추가
```
/add_us AAPL
/add_us MSFT
/add_us NVDA
```

**응답 예시:**
```
✅ 🇺🇸 AAPL 추가 완료!
현재 미국 종목: 6개
```

#### 한국 주식 추가
```
/add_kr 005930
/add_kr 000660
/add_kr 035420
```

**응답 예시:**
```
✅ 🇰🇷 삼성전자(005930) 추가 완료!
현재 한국 종목: 8개
```

---

### 종목 삭제

#### 미국 주식 삭제
```
/remove_us TSLA
```

**응답 예시:**
```
✅ 🇺🇸 TSLA 삭제 완료!
현재 미국 종목: 5개
```

#### 한국 주식 삭제
```
/remove_kr 035720
```

**응답 예시:**
```
✅ 🇰🇷 카카오(035720) 삭제 완료!
현재 한국 종목: 7개
```

---

### 감시 종목 확인
```
/list
```

**응답 예시:**
```
📊 현재 감시 종목

🇺🇸 미국 주식 (5개)
AAPL, MSFT, GOOGL, NVDA, TSLA

🇰🇷 한국 주식 (7개)
삼성전자(005930), SK하이닉스(000660), 
NAVER(035420), 카카오(035720), 
LG에너지솔루션(373220)
```

---

### 시장 상태 확인
```
/status
```

**응답 예시 (한국 장중):**
```
📊 시장 상태

⏰ 현재 시간: 10:30:15

🇰🇷 한국 장중 (09:00-15:30)
   감시 중: 7개 종목
🇺🇸 미국 장 마감
```

**응답 예시 (미국 장중):**
```
📊 시장 상태

⏰ 현재 시간: 23:45:22

🇰🇷 한국 장 마감
🇺🇸 미국 장중 (22:30-06:00)
   감시 중: 5개 종목
```

**응답 예시 (휴장 시간):**
```
📊 시장 상태

⏰ 현재 시간: 18:30:00

🇰🇷 한국 장 마감
🇺🇸 미국 장 마감

⏸️  현재 휴장 시간입니다
```

---

### 도움말
```
/help
```

모든 명령어 목록과 사용법을 보여줍니다.

---

## 🕐 시간대별 동작

### 한국 시장 (09:00 - 15:30)
```
09:00 → 스캔 시작 (한국만)
09:30 → 스캔 (한국만)
10:00 → 스캔 (한국만)
...
15:30 → 마지막 스캔 (한국만)
16:00 → 대기 (스캔 안함)
```

### 미국 시장 (22:30 - 06:00)
```
22:30 → 스캔 시작 (미국만)
23:00 → 스캔 (미국만)
23:30 → 스캔 (미국만)
00:00 → 스캔 (미국만)
...
06:00 → 마지막 스캔 (미국만)
06:30 → 대기 (스캔 안함)
```

### 휴장 시간
```
⏸️  스캔하지 않고 대기
30분마다 시간만 체크
```

---

## 💾 데이터 저장

### watchlist.json
종목 추가/삭제 시 자동으로 저장됩니다.

```json
{
  "us": ["AAPL", "MSFT", "NVDA"],
  "kr": ["005930", "000660", "035420"],
  "updated_at": "2025-10-31 10:30:00"
}
```

### 파일 위치
프로그램과 같은 폴더에 자동 생성됩니다.

### 재시작 시
자동으로 파일에서 종목 목록을 불러옵니다.

---

## 📊 실행 예시

### 시작
```bash
$ python oneil_breakout_bot_smart.py

✅ config.py에서 설정을 불러왔습니다.
✅ 감시 종목 로드 완료
   🇺🇸 미국: 5개
   🇰🇷 한국: 7개
✅ 텔레그램 명령어 리스너 시작

🤖 윌리엄 오닐 스마트 돌파매매 봇 시작

📊 감시 종목:
   🇺🇸 미국: 5개
   🇰🇷 한국: 7개

⏰ 스캔 주기: 30분
🕐 현재 상태: 🇰🇷 한국 장중
```

### 스캔 중 (한국 장중)
```
==================================================
🔍 윌리엄 오닐 스마트 스캔
📅 2025-10-31 10:00:00
🇰🇷 한국 장중 - 한국 주식 스캔 (7개)
==================================================

🇰🇷 한국 주식 스캔 중...

  🔍 삼성전자(005930)... ⚪
  🔍 SK하이닉스(000660)... ✅ 신호!
  🔍 NAVER(035420)... ⚪
  ...

📊 1개 신호 발견 (🇰🇷 1개)

==================================================

⏰ 다음 스캔: 2025-10-31 10:30:00
💤 30분 대기 중...
```

### 텔레그램 명령어 사용
```
[You] /add_us PLTR
[Bot] ✅ 🇺🇸 PLTR 추가 완료!
      현재 미국 종목: 6개

[You] /list
[Bot] 📊 현재 감시 종목
      
      🇺🇸 미국 주식 (6개)
      AAPL, MSFT, GOOGL, NVDA, TSLA, PLTR
      
      🇰🇷 한국 주식 (7개)
      ...
```

---

## 🎯 사용 팁

### 1. 처음에는 소수 종목
```
미국 3-5개
한국 3-5개
→ 신호 빈도 확인 후 점차 추가
```

### 2. 장 시작 전에 추가
```
한국: 09:00 전에 추가
미국: 22:30 전에 추가
```

### 3. 휴장 시간 활용
```
주말이나 휴장 시간에
종목 리스트 정리
```

### 4. /status로 확인
```
현재 어떤 시장이 열렸는지
몇 개 종목을 감시 중인지 확인
```

---

## 🆚 기존 통합 버전 vs 스마트 버전

| 기능 | 통합 버전 | 스마트 버전 |
|------|----------|------------|
| **시장 자동 선택** | ❌ | ✅ ⭐ |
| **시간대 인식** | ❌ | ✅ ⭐ |
| **텔레그램 명령어** | ❌ | ✅ ⭐ |
| **종목 동적 관리** | ❌ | ✅ ⭐ |
| **파일 자동 저장** | ❌ | ✅ ⭐ |
| **스캔 주기** | 1시간 | 30분 ⭐ |
| **리소스 효율** | 높음 | 매우 높음 ⭐ |

---

## 🔧 고급 설정

### 시간대 커스터마이징
파일에서 직접 수정 가능:
```python
# oneil_breakout_bot_smart.py 내부

# 한국 장 시간
kr_open = dt_time(9, 0)
kr_close = dt_time(15, 30)

# 미국 장 시간 (한국 시간)
us_open_night = dt_time(22, 30)
us_close_morning = dt_time(6, 0)
```

### 스캔 주기 변경
```python
# main() 함수 내부
SCAN_INTERVAL = 1800  # 30분 (초 단위)

# 예시:
# 900   = 15분
# 1800  = 30분
# 3600  = 1시간
```

---

## 🆘 문제 해결

### 명령어가 작동 안 함
```bash
# 봇에게 먼저 메시지 보내기
텔레그램에서 봇에게 /start 전송
```

### watchlist.json 오류
```bash
# 파일 삭제 후 재시작
rm watchlist.json
python oneil_breakout_bot_smart.py
```

### 시간대가 이상함
```bash
# 시스템 시간 확인
date

# 한국 시간대 설정 확인
echo $TZ
```

---

## 📝 명령어 치트시트

```
/help          - 도움말
/status        - 시장 상태
/list          - 감시 종목 보기

/add_us AAPL   - 미국 추가
/add_kr 005930 - 한국 추가

/remove_us AAPL   - 미국 삭제
/remove_kr 005930 - 한국 삭제
```

---

## ⚡ 빠른 시작 요약

1. **config.py 수정**
   ```python
   TELEGRAM_TOKEN = "실제_토큰"
   CHAT_ID = "실제_ID"
   ```

2. **실행**
   ```bash
   python oneil_breakout_bot_smart.py
   ```

3. **종목 추가**
   ```
   /add_us NVDA
   /add_kr 005930
   ```

4. **확인**
   ```
   /list
   /status
   ```

5. **완료!** 🎉

---

**스마트하게 투자하세요!** 🧠📈

자동으로 시간대를 인식하고,
텔레그램으로 쉽게 관리하는
차세대 돌파매매 봇입니다!
